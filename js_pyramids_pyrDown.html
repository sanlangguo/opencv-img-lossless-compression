<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Image PyrDown Example</title>
    <link href="js_example_style.css" rel="stylesheet" type="text/css" />
    <style>
        #canvasInput,
        #canvasOutput {
            width: 400px;
            height: 400px;
        }
    </style>
</head>

<body>
    <p class="err" id="errorMessage"></p>
    </div>
    <div>
        <table cellpadding="0" cellspacing="0" width="0" border="0">
            <tr>
                <td>
                    <canvas id="canvasInput"></canvas>
                </td>
                <td>
                    <canvas id="canvasOutput"></canvas>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="caption">canvasInput <input type="file" id="fileInput" name="file" accept="image/*" />
                    </div>
                </td>
                <td>
                    <div class="caption">展示</div>
                </td>
            </tr>
        </table>
    </div>
    <script src="utils.js" type="text/javascript"></script>
    <script type="text/javascript">
        let utils = new Utils('errorMessage');

        utils.addFileInputHandler('fileInput', 'canvasInput', () => {
            setTimeout(() => {
                let src = cv.imread('canvasInput');
                console.log(src, 'src')
                let dst = new cv.Mat();
                cv.pyrDown(src, dst, new cv.Size(0, 0), cv.BORDER_DEFAULT);
                cv.imshow('canvasOutput', dst);
                src.delete(); dst.delete();
            }, 100)
        });
    </script>
</body>

</html>